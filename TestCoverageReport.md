# Отчет о покрытии кода тестами DeepSpaceSaga Engine

## Общая статистика

**Дата анализа:** 15 августа 2025  
**Общее покрытие строк:** 55.47% (805 из 1451 строк)  
**Общее покрытие веток:** 64.15% (136 из 212 веток)

## Детальный анализ по проектам

### 1. DeepSpaceSaga.Common
- **Покрытие строк:** 42.63%
- **Покрытие веток:** 44.44%
- **Сложность:** 360

#### Классы с высоким покрытием (80-100%):
- `GameStateMapper` - 100% строк, 100% веток
- `CelestialObjectDto` - 100% строк, 100% веток
- `GameSessionDto` - 100% строк, 100% веток
- `ScenarioGenerator` - 100% строк, 100% веток
- `SpacecraftGenerator` - 100% строк, 100% веток
- `MiningModulesGenerator` - 100% строк, 100% веток
- `MiningOperationHarvest` - 100% строк, 100% веток

#### Классы со средним покрытием (40-80%):
- `AsteroidGenerator` - 89.65% строк, 100% веток
- `GameSessionMapper` - 37.83% строк, 100% веток
- `BaseCelestialObject` - 47.82% строк, 100% веток
- `AbstractItem` - 57.14% строк, 100% веток
- `Command` - 50% строк, 100% веток
- `GameSession` - 46.15% строк, 0% веток

#### Классы с низким покрытием (0-40%):
- `UiTools` - 0% строк, 0% веток
- `GeometryTools` - 12.76% строк, 0% веток
- `GenerationTool` - 23.53% строк, 100% веток
- `ModularSystem` - 23.52% строк, 100% веток
- `AbstractModule` - 36% строк, 0% веток
- `MiningLaser` - 42.1% строк, 100% веток

#### Классы без покрытия (0%):
- `DialogsHistory` - 0% строк, 100% веток
- `CrewMember` - 0% строк, 100% веток
- `PersonPortrait` - 0% строк, 100% веток
- `SpaceMapColor` - 0% строк, 100% веток
- `SpaceMapLine` - 0% строк, 100% веток
- `SpaceMapVector` - 0% строк, 100% веток
- `GeometryExtensions` - 0% строк, 0% веток
- `ObjectExtensions` - 0% строк, 0% веток

### 2. DeepSpaceSaga.Server
- **Покрытие строк:** 28.83%
- **Покрытие веток:** 18.85%
- **Сложность:** 182

#### Классы с высоким покрытием (80-100%):
- `MetricsServer` - 100% строк, 100% веток
- `ProcessingEventAcknowledgeHandler` - 100% строк, 100% веток
- `ProcessingLocationsHandler` - 100% строк, 100% веток
- `TurnProcessing` - 92.3% строк, 100% веток

#### Классы со средним покрытием (40-80%):
- `LocalGameServer` - 56.33% строк, 44.44% веток
- `SessionContextService` - 100% строк, 50% веток
- `TurnSchedulerService` - 23.37% строк, 13.63% веток

#### Классы с низким покрытием (0-40%):
- `SchedulerService` - 29.62% строк, 0% веток
- `SessionInfoService` - 36.95% строк, 100% веток

#### Классы без покрытия (0%):
- `Settings` - 0% строк, 100% веток
- `DialogsService` - 0% строк, 0% веток
- `ScenarioService` - 0% строк, 100% веток
- `SaveLoadService` - 0% строк, 100% веток
- `MetricsService` - 0% строк, 0% веток
- `ProcessingEventInvokerHandler` - 23.33% строк, 0% веток

### 3. DeepSpaceSaga.UI.Controller
- **Покрытие строк:** Не указано в отчете
- **Покрытие веток:** Не указано в отчете

### 4. DeepSpaceSaga.UI
- **Покрытие строк:** Не указано в отчете
- **Покрытие веток:** Не указано в отчете

## Анализ покрытия по категориям

### Мапперы (Mappers)
- **GameActionEventMapper** - 0% строк, 0% веток
- **CelestialObjectMapper** - 20% строк, 0% веток
- **ModuleMapper** - 0% строк, 0% веток
- **DialogMapper** - 0% строк, 100% веток
- **CommandMapper** - 0% строк, 100% веток

### Генераторы (Generators)
- **AsteroidGenerator** - 89.65% строк, 100% веток
- **SpacecraftGenerator** - 100% строк, 100% веток
- **MiningModulesGenerator** - 100% строк, 100% веток

### Сервисы (Services)
- **LocalGameServer** - 56.33% строк, 44.44% веток
- **SessionContextService** - 100% строк, 50% веток
- **DialogsService** - 0% строк, 0% веток

## Рекомендации по улучшению покрытия

### 1. Приоритет 1 (Критично - 0% покрытия)
- **UiTools** - UI инструменты для координат и зума
- **DialogsService** - Сервис управления диалогами
- **MetricsService** - Сервис метрик
- **SaveLoadService** - Сервис сохранения/загрузки

### 2. Приоритет 2 (Важно - 0-20% покрытия)
- **GameActionEventMapper** - Маппер игровых событий
- **ModuleMapper** - Маппер модулей
- **CelestialObjectMapper** - Маппер небесных объектов
- **GeometryTools** - Геометрические инструменты

### 3. Приоритет 3 (Средне - 20-50% покрытия)
- **GenerationTool** - Инструмент генерации
- **ModularSystem** - Система модулей
- **AbstractModule** - Абстрактный модуль
- **BaseSpaceship** - Базовый космический корабль

### 4. Приоритет 4 (Низко - 50-80% покрытия)
- **GameSessionMapper** - Маппер игровых сессий
- **BaseCelestialObject** - Базовый небесный объект
- **AbstractItem** - Абстрактный предмет

## Текущее состояние тестов

**Всего тестов:** 583  
**Проходящих тестов:** 583  
**Падающих тестов:** 0  
**Покрытие тестами:** 100% (все тесты проходят)

## Заключение

Проект имеет **средний уровень покрытия кода тестами (55.47%)**. Основные бизнес-логика и мапперы покрыты хорошо, но UI компоненты, сервисы и некоторые утилиты требуют дополнительного тестирования.

**Рекомендуется:**
1. Добавить тесты для классов с 0% покрытия
2. Увеличить покрытие для классов с низким покрытием
3. Сосредоточиться на критически важных сервисах (DialogsService, SaveLoadService)
4. Добавить интеграционные тесты для UI компонентов
